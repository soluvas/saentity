/*
 * generated by Xtext
 */
package com.soluvas.saentity;

import net.danieldietrich.protectedregions.core.RegionParserFactory;
import net.danieldietrich.protectedregions.xtext.IProtectedRegionSupportConfigurer;
import net.danieldietrich.protectedregions.xtext.JavaIoWrapper;
import net.danieldietrich.protectedregions.xtext.ProtectedRegionSupport;

import org.eclipse.xtext.generator.IFileSystemAccess;
import org.eclipse.xtext.generator.JavaIoFileSystemAccess;

import com.google.inject.Provides;

/**
 * Use this class to register components to be used at runtime / without the Equinox extension registry.
 */
public class SaentityRuntimeModule extends com.soluvas.saentity.AbstractSaentityRuntimeModule {

//	public Class<? extends JavaIoFileSystemAccess> bindJavaIoFileSystemAccess() {
//		return BidiJavaIoFileSystemAccess.class;
//	}
	
	@Provides
	public JavaIoFileSystemAccess createJavaIoFileSystemAccess() {
    	JavaIoFileSystemAccess fsa = new JavaIoWrapper(new IProtectedRegionSupportConfigurer() {
			
			@Override
			public void configure(ProtectedRegionSupport.Builder builder) {
			    builder.addParser(RegionParserFactory.createJavaParser(), ".java")
			    	.addParser(RegionParserFactory.createXmlParser(), ".xml", ".xhtml")
			    	.read("", IFileSystemAccess.DEFAULT_OUTPUT);
			}
			
		});
    	return fsa;
	}
	
//	@Override
//	public void configure(Binder binder) {
//		super.configure(binder);
//		binder.bind(JavaIoFileSystemAccess.class).to
//	}
}
